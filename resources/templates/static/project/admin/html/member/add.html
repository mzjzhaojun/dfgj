<!DOCTYPE html>
<html ng-app="add">
  <head>
    <title>新增</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="icon" type="image/x-icon" href="../../../resource/img/logo.ico">
    <link rel="stylesheet" type="text/css" href="../../../../resource/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../../../../resource/css/common.css">
     <link rel="stylesheet" type="text/css" href="../../../../resource/css/zTree/zTreeStyle/zTreeStyle.css">
    <link rel="stylesheet" type="text/css" href="../../../../resource/css/zTree/sysmenu.css">
    <script type="text/javascript" src="../../../../resource/js/angular-1.0.1.min.js"></script>
    <script type="text/javascript" src="../../../../resource/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../../../../resource/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../resource/js/zTree/js/jquery.ztree.all-3.5.js"></script>
    <script type="text/javascript" src="../../../../resource/js/jquery.cookie.js"></script>
    <script src="../../../../resource/js/date/js/eap.core.js"></script>
    <!-- 文件上传 -->  
	<script src="../../../../resource/js/upload/ajaxupload.3.6.js" type="text/javascript"></script>
	<script src="../../../../resource/js/upload/upload.js" type="text/javascript"></script>
	<!-- 表单验证 -->
	<link rel="stylesheet" type="text/css" href="../../../../resource/js/validate/css/validate.css"/>
	<script type="text/javascript" src="../../../../resource/js/validate/js/eap.tip.js" ></script>
	<script type="text/javascript" src="../../../../resource/js/validate/js/eap.validate.js"></script>
	<script type="text/javascript" src="../../../../resource/js/date/js/eap.lang-zh_CN.js"></script>
	
	
	<script type="text/javascript" src="../../../../resource/js/response.js"></script>
	<script type="text/javascript">
		
		var add = angular.module("add", []);
		add.controller("addController",function($scope, $http) {
			$scope.shopstype = function(){
			    var data = {};
				$http({
					url : parent.getMenuLinksHref("shopstypelist"),
					method : 'POST',
					dataType : "json",
					headers: {'Content-Type': 'application/json;charset=UTF-8;'},
					data : JSON.stringify(data)
					}).success(function(data, status, headers, config){
						//响应成功
						$scope.names= data;
						console.log(data);
					}).error(function(data, status, headers, config){
						//处理响应失败
						response(status);
					});
			}
			$scope.shopstype();
			$scope.formData = {};
			
			$scope.formData.visable=1;
			//返回
			$scope.onReturn=function(){
				history.go(-1);
			}
			//保存
			$scope.onPreserved=function(){
				var isValid = $("#saveForm").valid();
					if(isValid){
    				$http({
    					url:parent.getMenuLinksHref("shopspost"),
    					method:'POST',
    					dataType : "json",
    					headers: {'Content-Type': 'application/json;charset=UTF-8;'},
    					data: JSON.stringify($scope.formData)
    		  		}).success(function(data, status, headers, config){
    		  			location.href="list.html";
    		  		}).error(function(data, status, headers, config){
						//处理响应失败
    		  			response(status);
					})
    			}
			}
		})
		
		
		
	</script>
</head>
  
  <body ng-controller="addController">
  	<form method="post" id="saveForm" action="">
  		 <!-- 操作按钮操作区 -->
  		 <div class="col-lg-12 topActionPanel">
	        <div>
		    	<button type="button" class="btn btn-primary" ng-click="onPreserved()">确 定</button>
	    	</div>
	    	<div>
		    	<button type="button" class="btn btn-primary" ng-click="onReturn()">返 回</button>
	    	</div>
    	</div>
   		<div class="col-lg-6">
	   		 <div class="input-group input-group-sm">
	            <span class="input-group-addon text-right spanwidth">店铺名称</span>
	           	<input type="text" class="form-control required" placeholder="请输入店铺名称" name="shops_name" ng-model="formData.shops_name" maxlength="16">
	        	<span class="input-group-addon verifyprompt">*</span>
	        </div>
	        <div class="input-group input-group-sm">
				<span class="input-group-addon text-right spanwidth">店铺类型</span>
				<select class="form-control" ng-model="formData.type" name="type" ng-options="name.shopsTypevalue.id as name.shopsTypevalue.name for name in names">
					<option value="">请选择店铺类型</option>
				</select>
	        </div>
	        <div class="input-group input-group-sm">
	            <span class="input-group-addon text-right spanwidth">店铺图片</span>
	        	<input type="hidden" class="form-control" class="form-control" name="shops_img" id="shops_img" ng-model="formData.shops_img"/> 
	        </div>
	        <img id="image" src="" style="height: 200px;width: 200px;border: solid 1px #ccc;margin-left: 200px;">
	        <div class="input-group input-group-sm">
	            <span class="input-group-addon text-right spanwidth">经营范围</span>
	           	<input type="text" class="form-control required" placeholder="请输入经营范围" name="business_scope" ng-model="formData.business_scope" maxlength="16">
	        	<span class="input-group-addon verifyprompt">*</span>
	        </div>
			<div class="input-group input-group-sm">
	            <span class="input-group-addon text-right spanwidth">店铺介绍</span>
	           	<input type="text" class="form-control required" placeholder="请输入店铺说明" name="introduction" ng-model="formData.introduction">
	        	<span class="input-group-addon verifyprompt">*</span>
	        </div>
	        <div class="input-group input-group-sm">
	            <span class="input-group-addon text-right spanwidth">店铺地址</span>
	           	<input type="text" class="form-control required" placeholder="请输入店铺地址" name="address" ng-model="formData.address">
	        	<span class="input-group-addon verifyprompt">*</span>
	        </div>
	        <div class="input-group input-group-sm">
	            <span class="input-group-addon text-right spanwidth">店铺电话</span>
	           	<input type="text" class="form-control required" placeholder="请输入店铺联系电话" name="mobile" ng-model="formData.mobile" maxlength="11">
	        	<span class="input-group-addon verifyprompt">*</span>
	        </div>
	        <div class="input-group input-group-sm">
				<label class="input-group-addon text-right spanwidth">店铺备注</label> 
				<textarea  class="form-control" style="height: 103px;" placeholder="请输入备注信息" name="remark" ng-model="formData.remark">
				</textarea>
			</div>
   		</div>
    </form>
  </body>
  <script type="text/javascript">
 		upload(parent.sys.fileUrl,"shops_img","image","image");
	</script>
</html>
