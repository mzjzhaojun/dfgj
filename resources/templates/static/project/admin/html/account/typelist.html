<!DOCTYPE html>
<html ng-app="list">
  <head>
    <title>角色类型-list</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="icon" type="image/x-icon" href="../../../resource/img/logo.ico">
     <link rel="stylesheet" type="text/css" href="../../../../resource/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../../../resource/css/list.css">
    <script type="text/javascript" src="../../../../resource/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../../../../resource/js/angular-1.0.1.min.js"></script>
   <!-- 弹出框 -->
   
	<script type="text/javascript" src="../../../../resource/js/artDialog/skins/js/artDialog.source.js"></script>
    <script type="text/javascript" src="../../../../resource/js/artDialog/skins/js/iframeTools.source.js"></script>
	<script type="text/javascript" src="../../../../resource/js/artDialog/skins/js/artDialogZJ.js"></script>
    <script type="text/javascript" src="../../../../resource/js/getUrlParam.js"></script>
    
      
    <!-- 分页 -->
	<script type="text/javascript" src="../../../../resource/js/paging.js"></script>
	<script type="text/javascript" src="../../../../resource/js/response.js"></script>
    <script type="text/javascript">
		
		var list = angular.module("list", []);
		list.controller("listController",function($scope, $http) {
	//		var url = "../../../app/goods_type/listType";
			var ids = "";
			var flag = true;
			$scope.toselect=function(id,name){
			  var parm = {};
			  parm.id=id;
			  parm.name=name;
			  setDateChild(parm);
			  artClose();
			}
			//搜索
			$scope.onSearch=function(){
				$scope.pageList();
			}
			//翻页	
			$scope.changePage=function(){
				$scope.pageList();
			}
		
			$scope.onReturn=function(){
			  artClose();
		    }
			
			$scope.pageList = function(){
				 var getn =$("#name").val();
			 	 var data1 = {"name":getn};
			 	 pageNo = parent.currentPage;
				$http({
					url:parent.getMenuLinksHref("roleself"),
					method:'POST',
					dataType : "json",
					withCredentials: true,
					headers: {'Content-Type': 'application/json;charset=UTF-8;',"pageNo":pageNo,"pageSize":pageSize,"orderBy":"name","dir":"desc"},//,"pageSize":"10"
					data:JSON.stringify(data1)
					}).success(function(data, status, headers, config){						
						//响应成功
						totalCount = headers('totalCount');
						pageCount = headers('pageCount');
						$scope.tasks= data;
						paging();					
						initPage();

					}).error(function(data, status, headers, config){
						//处理响应失败
						response(status);
					
					});
					
					
			}
				$scope.pageList();
		
		})
		
		function confirmDeletion(){
			var appElement = document.querySelector('[ng-controller=listController]');
			var $scope = angular.element(appElement).scope();
		
		}
		
	</script>
  </head>
  
  <body ng-controller="listController">
  
   <h5>
    	 <span class="glyphicon glyphicon-search"  style="margin:0px 5px;color:#99DFF8;" ></span>
  		    <input type="text" id="name" class="form-control" value="" placeholder="请输入查找的角色名" style="width: 25%;display: inline;">
  		    <i class="glyphicon glyphicon-remove" onclick="removeSearch()"></i> 	
  		    <a class="btn btn-primary" style="margin: 0px auto;width: 80px;"  href="#" role="button" ng-click="onSearch()">快速搜索</a>
    		<a class="btn btn-primary" style="margin: 0px auto;width: 80px;"  href="#" role="button" ng-click="onReturn()">返回</a>
    		
    </h5>
    		<table width="100%" border="0" cellspacing="0" cellpadding="0" class="table">
    			<tr class="info">
					<th>序号</th>
					<th>角色名</th>
					<th>角色类型</th>
					<th>是否管理员</th>					
					<th>相关操作</th>
				  </tr>
				  <tr ng-repeat="task in tasks" class='tr{{$index%2+2}}'  ng-class="{selected: $index==selectedRow}">
					<td ng-bind="$index+1">1</td>				
					<td>{{task.role.name}}</td>
					<td>{{task.role.typename}}</div></td>
					<td>{{task.role.is_managename}}</td>
					<td>					
				    		<img ng-click="toselect(task.role.id,task.role.name)" class="operationImg" src="../../../../resource/img/cms/search.png" title="选择">
				  		</div>
					</td>
				  </tr>
    		</table>
 
    	
    	  	
  	<!-- 分页区 -->
	<div style="text-align: center; font-size: 16px;">
		<span class="text-info" style="position:relative;top:-10px;">共<label id="totalCount"></label>条</span>
		<ul class="pagination" style="margin: 0px 10px;padding:0px;">
		</ul>
		<span class="text-info" style="position:relative;top:-10px;">第<label id="pageNo"></label>页/共<label id="pageCount"></label>页</span>
		<select id="pageSize" class="form-control" style="width: 70px;float: right;">
			
			
			
		</select>
		<span class="text-info" style="position:relative;top:6px;float: right;margin: 0px 5px;">每页显示</span>
	</div>
    	
    </div>
    
  </body>
</html>
